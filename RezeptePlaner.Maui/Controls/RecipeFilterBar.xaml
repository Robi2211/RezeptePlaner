<?xml version="1.0" encoding="utf-8" ?>
<ContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="RezeptePlaner.Maui.Controls.RecipeFilterBar"
             x:Name="FilterBarControl">
    
    <VerticalStackLayout Spacing="10">
        
        <!-- Filter Bar Card -->
        <Frame BackgroundColor="{StaticResource Surface}"
               BorderColor="{StaticResource Border}"
               CornerRadius="20"
               Padding="20"
               HasShadow="True">
            <Grid RowDefinitions="Auto" ColumnDefinitions="*,Auto,Auto,Auto" ColumnSpacing="10">
                
                <!-- Search Bar with Icon -->
                <Border Grid.Column="0"
                        BackgroundColor="{StaticResource Muted}"
                        Stroke="{StaticResource Border}"
                        StrokeShape="RoundRectangle 8"
                        Padding="12,8">
                    <Grid ColumnDefinitions="Auto,*">
                        <!-- Search Icon -->
                        <Label Grid.Column="0"
                               Text="ðŸ”"
                               FontSize="16"
                               VerticalOptions="Center"
                               Margin="0,0,8,0" />
                        <!-- Search Entry -->
                        <Entry Grid.Column="1"
                               Text="{Binding Source={x:Reference FilterBarControl}, Path=SearchText, Mode=TwoWay}"
                               Placeholder="Rezepte oder Zutaten suchen..."
                               PlaceholderColor="{StaticResource ForegroundMuted}"
                               TextColor="{StaticResource Foreground}"
                               BackgroundColor="Transparent"
                               FontSize="14"
                               VerticalOptions="Center" />
                    </Grid>
                </Border>
                
                <!-- Category Dropdown -->
                <Border Grid.Column="1"
                        BackgroundColor="{StaticResource Muted}"
                        Stroke="{StaticResource Border}"
                        StrokeShape="RoundRectangle 8"
                        Padding="12,8"
                        WidthRequest="180">
                    <Grid ColumnDefinitions="Auto,*,Auto">
                        <Label Grid.Column="0"
                               Text="â–¼"
                               TextColor="{StaticResource ForegroundMuted}"
                               FontSize="10"
                               VerticalOptions="Center"
                               Margin="0,0,8,0" />
                        <Picker Grid.Column="1"
                                ItemsSource="{Binding Source={x:Reference FilterBarControl}, Path=Categories}"
                                SelectedItem="{Binding Source={x:Reference FilterBarControl}, Path=SelectedCategory, Mode=TwoWay}"
                                Title="Alle Kategorien"
                                TextColor="{StaticResource Foreground}"
                                TitleColor="{StaticResource ForegroundMuted}"
                                BackgroundColor="Transparent"
                                FontSize="14"
                                VerticalOptions="Center"
                                HorizontalOptions="FillAndExpand" />
                    </Grid>
                </Border>
                
                <!-- Difficulty Dropdown -->
                <Border Grid.Column="2"
                        BackgroundColor="{StaticResource Muted}"
                        Stroke="{StaticResource Border}"
                        StrokeShape="RoundRectangle 8"
                        Padding="12,8"
                        WidthRequest="200">
                    <Grid ColumnDefinitions="Auto,*,Auto">
                        <Label Grid.Column="0"
                               Text="â–¼"
                               TextColor="{StaticResource ForegroundMuted}"
                               FontSize="10"
                               VerticalOptions="Center"
                               Margin="0,0,8,0" />
                        <Picker Grid.Column="1"
                                ItemsSource="{Binding Source={x:Reference FilterBarControl}, Path=Difficulties}"
                                SelectedItem="{Binding Source={x:Reference FilterBarControl}, Path=SelectedDifficulty, Mode=TwoWay}"
                                Title="Alle Schwierigkeiten"
                                TextColor="{StaticResource Foreground}"
                                TitleColor="{StaticResource ForegroundMuted}"
                                BackgroundColor="Transparent"
                                FontSize="14"
                                VerticalOptions="Center"
                                HorizontalOptions="FillAndExpand" />
                    </Grid>
                </Border>
                
                <!-- Time Slider -->
                <Border Grid.Column="3"
                        BackgroundColor="{StaticResource Muted}"
                        Stroke="{StaticResource Border}"
                        StrokeShape="RoundRectangle 8"
                        Padding="12,8"
                        WidthRequest="220">
                    <Grid ColumnDefinitions="Auto,*,Auto" ColumnSpacing="8">
                        <!-- Clock Icon -->
                        <Label Grid.Column="0"
                               Text="ðŸ•"
                               TextColor="{StaticResource Primary}"
                               FontSize="16"
                               VerticalOptions="Center" />
                        <!-- Slider -->
                        <Slider Grid.Column="1"
                                Minimum="0"
                                Maximum="180"
                                Value="{Binding Source={x:Reference FilterBarControl}, Path=MaxTimeMinutes, Mode=TwoWay}"
                                MinimumTrackColor="{StaticResource Primary}"
                                MaximumTrackColor="{StaticResource Gray300}"
                                ThumbColor="{StaticResource Primary}"
                                VerticalOptions="Center" />
                        <!-- Time Label -->
                        <Label Grid.Column="2"
                               Text="{Binding Source={x:Reference FilterBarControl}, Path=MaxTimeMinutes, StringFormat='Bis {0} Min'}"
                               TextColor="{StaticResource Foreground}"
                               FontSize="12"
                               VerticalOptions="Center"
                               WidthRequest="70" />
                    </Grid>
                </Border>
                
            </Grid>
        </Frame>
        
        <!-- Result Count Label -->
        <Label Text="{Binding Source={x:Reference FilterBarControl}, Path=ResultCount, StringFormat='{0} Rezepte gefunden'}"
               TextColor="{StaticResource ForegroundMuted}"
               FontSize="14"
               Margin="5,0,0,0" />
        
    </VerticalStackLayout>
    
</ContentView>
